
(function(){'use strict';angular.module('footer.constants',[]);})();(function(){'use strict';angular.module('globalHeader.controllers',[]);})();(function(){'use strict';var NS='globalHeader.directives';angular.module(NS,['globalHeader.services']);})();(function(){'use strict';angular.module('footer.models',[]);})();(function(){'use strict';angular.module('globalHeader.services',[]);})();(function(){'use strict';var module=angular.module('globalHeader.directives');module.directive('localePicker',['localePickerService',function(localePickerService){var _controller=['$scope',function($scope){$scope.inherited={};$scope.data=[];$scope.data.countryData=angular.copy($scope.countryData);$scope.data.defaultRegion=angular.copy($scope.defaultRegion);$scope.loadLanguage=function(){var language=localePickerService.getLanguage();if(language){localePickerService.loadLanguage(language.url);}};$scope.closeModal=function(){$scope.activateModal.baseModalVisible=false;$scope.loadLanguage();$scope.enableScroll();};$scope.inherited.close=function(){$scope.closeModal();};$scope.inherited.toggle=function(){$scope.activateModal.countryPickerVisible=!$scope.activateModal.countryPickerVisible;};$scope.inherited.getCountryPickerStatus=function(){return $scope.activateModal;};$scope.inherited.getCountryData=function(){return $scope.data;};$scope.inherited.getModalTitle=function(modalType){var modalTitle='',isModalTitle=!!$scope.headerTitle;isModalTitle=isModalTitle&&!!$scope.headerTitle[modalType];isModalTitle=isModalTitle&&!!$scope.headerTitle[modalType].content;if(isModalTitle){modalTitle=$scope.headerTitle[modalType].content;}
return modalTitle;};$scope.inherited.setCountry=function(country){localePickerService.setCountry(country);$scope.currentCountry=angular.copy(country);};}],_templateUrl=function(){return'/static/js/angular/apps/header/partials/_desktopLocalePickerModal.html';},_link=function(scope){var body=angular.element('body'),defaultCss=body.css('overflow'),countrySitesElement=angular.element('.language-name, .footer-flag');countrySitesElement.on('click',function(){body.css('overflow','hidden');scope.removeStyles(angular.element('#language-modal-desktop'));});scope.enableScroll=function(){body.css('overflow',defaultCss);};scope.removeStyles=function(element){var style;if(element){style=element.attr('style');if(style){element.attr('style','');}}};};return{scope:{countryData:'=',defaultRegion:'@',currentCountry:'=',type:'@',activateModal:'=',headerTitle:'='},restrict:'E',templateUrl:_templateUrl,controller:_controller,link:_link};}]);}());(function(){'use strict';var module=angular.module('globalHeader.directives');module.directive('countryPicker',['localePickerService',function(localePickerService){var _controller=['$scope',function($scope){$scope.data={};$scope.setCountry=function(country){$scope.callbacks.setCountry(country);$scope.setStatus();};$scope.toggleSelectedRegion=function(region){$scope.selectedRegion=($scope.selectedRegion!==region)?region:'';};$scope.setStatus=function(){var languageList=localePickerService.getLanguageList();if(languageList&&angular.isArray(languageList)&&languageList.length===1){localePickerService.setLanguage(languageList[0]);$scope.callbacks.close();}else{$scope.callbacks.toggle('languagePicker');}};}],_link=function(scope){scope.data=scope.callbacks.getCountryData();scope.modalTitle=scope.callbacks.getModalTitle('countryPicker');scope.modalVisible=scope.callbacks.getCountryPickerStatus();scope.isSingleLanguage=function(country){if(country&&country.supportedLanguages&&angular.isArray(country.supportedLanguages)&&country.supportedLanguages.length===1){return true;}
return false;};scope.getLanguageUrl=function(country){if(scope.isSingleLanguage(country)){return country.supportedLanguages[0].url;}};scope.close=function(){scope.callbacks.close();};},_templateUrl=function(){return'/static/js/angular/apps/header/partials/_desktopCountryPickerModal.html';};return{restrict:'E',require:'^localePicker',scope:{countryData:'=',defaultRegion:'@',callbacks:'=',type:'@'},link:_link,controller:_controller,templateUrl:_templateUrl};}]);}());(function(){'use strict';var module=angular.module('globalHeader.directives');module.directive('languagePicker',['localePickerService',function(localePickerService){var _controller=['$scope',function($scope){$scope.setLanguage=function(language){localePickerService.setLanguage(language);$scope.callbacks.toggle('countryPicker');$scope.callbacks.close();};$scope.goBack=function(){$scope.callbacks.toggle('countryPicker');};}],_link=function(scope){scope.modalVisible=scope.callbacks.getCountryPickerStatus();scope.modalTitle=scope.callbacks.getModalTitle('languagePicker');scope.close=function(){scope.callbacks.close();};},_templateUrl=function(){return'/static/js/angular/apps/header/partials/_desktopLanguagePickerModal.html';};return{restrict:'E',require:'^localePicker',scope:{country:'=',callbacks:'='},link:_link,controller:_controller,templateUrl:_templateUrl};}]);}());(function(){'use strict';var module,APP='globalHeader';module=angular.module('globalHeader',['restangular','ngRoute','ngSanitize','ngCookies','ipCookie','ngAnimate','angular-locker','isLocalization','common.filters','common.services','common.directives','common.constants','footer.constants','footer.models',[APP,'.controllers'].join(''),[APP,'.directives'].join(''),[APP,'.services'].join('')]);module.config(['RestangularProvider','url','siteLang','isLocalizeProvider','translations','$locationProvider',function(RestangularProvider,url,siteLang,isLocalizeProvider,translations,$loc){var cache={};RestangularProvider.setBaseUrl('/api/');RestangularProvider.setDefaultHeaders({'Content-Type':'application/json'});RestangularProvider.setResponseExtractor(function(response){return response.data;});$loc.html5Mode(true);cache[siteLang]=translations;isLocalizeProvider.setOptions({baseUrl:['/static/','js/angular/apps/header/','i18n/'].join(''),language:siteLang,cache:cache,loadResourceOnInit:true});}]);angular.element(document).ready(function(){angular.bootstrap(angular.element('header[role="global"], header[role="simple"]'),['globalHeader']);angular.bootstrap(angular.element('footer[role="global"], footer[role="simple"]'),['globalHeader']);});}());(function(){'use strict';var APP=angular.module('footer.constants');APP.constant('FOOTER_CONSTANTS',{REGION_NAME_NA_SA:'COUNTRY_SITES_NORTH_SOUTH_AMERICA',COUNTRY_CODE_BRAZIL:'BR',COUNTRY_CODE_CANADA:'CA',COUNTRY_CODE_MEXICO:'MX',COUNTRY_CODE_UNITED_STATES:'US',REGION_NAME_AFRICA_MIDDLE_EAST:'COUNTRY_SITES_AFRICA_MIDDLE_EAST',COUNTRY_CODE_ISREAL:'IL',COUNTRY_CODE_SOUTH_AFRICA:'ZA',COUNTRY_CODE_UNITED_ARAB_EMIRATES:'AE',REGION_NAME_EUROPE:'COUNTRY_SITES_EUROPE',COUNTRY_CODE_AUSTRIA:'AT',COUNTRY_CODE_BELGIUM:'BE',COUNTRY_CODE_DENMARK:'DK',COUNTRY_CODE_FINLAND:'FI',COUNTRY_CODE_FRANCE:'FR',COUNTRY_CODE_GERMANY:'DE',COUNTRY_CODE_IRELAND:'IE',COUNTRY_CODE_ITALY:'IT',COUNTRY_CODE_NETHERLANDS:'NL',COUNTRY_CODE_NORWAY:'NO',COUNTRY_CODE_POLAND:'PL',COUNTRY_CODE_PORTUGAL:'PT',COUNTRY_CODE_RUSSIA:'RU',COUNTRY_CODE_SPAIN:'ES',COUNTRY_CODE_SWEDEN:'SE',COUNTRY_CODE_SWITZERLAND:'CH',COUNTRY_CODE_TURKEY:'TR',COUNTRY_CODE_UNITED_KINGDOM:'GB',REGION_NAME_ASIA_PACIFIC:'COUNTRY_SITES_ASIA_PACIFIC',COUNTRY_CODE_AUSTRALIA:'AU',COUNTRY_CODE_HONG_KONG:'HK',COUNTRY_CODE_INDIA:'IN',COUNTRY_CODE_JAPAN:'JP',COUNTRY_CODE_MALAYSIA:'MY',COUNTRY_CODE_NEW_ZEALAND:'NZ',COUNTRY_CODE_SINGAPORE:'SG',COUNTRY_CODE_SOUTH_KOREA:'KR',COUNTRY_CODE_THAILAND:'TH'});})();(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('AcctCtrl',['$scope','$attrs','$filter','$injectedData','userService','accountService','orderService',function($scope,$attrs,$filter,$injectedData,userService,accountService,orderService){$scope.init=function(){$scope.userId=$attrs.userid||null;$scope.loadAccountData($scope.userId);if(angular.isDefined($injectedData.isUserLoggedIn)){$scope.loggedIn=$injectedData.isUserLoggedIn;}else{$scope.loggedIn=false;}};$scope.loadAccountData=function(userId){$scope.subsRemaining=0;$scope.creditsPayAsYouGo=0;$scope.creditSubs=0;$scope.hasActualSuspendedSubscription=false;$scope.subsExpirationStatus=[];$scope.hasActiveSubscription=false;if(userId){userService.getUser(userId).then(function(user){$scope.hasPurchased=user.hasPurchased;if($scope.hasPurchased){userService.activeSubscription(userId).then(function(subscription){if(subscription.userHasActiveSubscription){if(subscription.payload&&subscription.payload.length!==0){$scope.hasActiveSubscription=true;$scope.subsRemaining=$filter('number')(subscription.payload.downloadCount.remaining,0);}}});}});userService.hasActualSuspendedSubscription(userId).then(function(suspended){$scope.hasActualSuspendedSubscription=suspended.hasActualSuspendedSubscription;});userService.subscriptionExpirationStatus($attrs.userid).then(function(expirationStatus){$scope.subsExpirationStatus=expirationStatus;});accountService.getAccount(userId).then(function(account){$scope.corporateAccount=account.isCorporateMaster||account.isCorporateSlave;$scope.isCorporateSlave=account.isCorporateSlave;$scope.creditsPayAsYouGo=$filter('number')(account.balance[8],0);$scope.creditSubs=$filter('number')(account.balance[5],0);});}};$scope.$on('UPDATE_HEADER_NAME',function(response,data){$scope.userId=data.userId;$scope.loggedIn=data.loggedIn;});$scope.$on('UPDATE_HEADER_AMOUNT',function(response,data){var orderId=data.orderId;$scope.totalCredits=0;orderService.getOrder(orderId,$scope.userId,'credits').then(function(data){angular.forEach(data.orderItems,function(value){$scope.totalCredits+=value.Points;});$scope.creditsPayAsYouGo=parseInt($scope.creditsPayAsYouGo,10)+$scope.totalCredits;});});$scope.init();}]);}());(function(){'use strict';var footer=angular.module('globalHeader.controllers');footer.controller('LocaleCtrl',['$scope','$filter','footerStateService','siteLang','FOOTER_CONSTANTS','$injectedData',function($scope,$filter,footerStateService,siteLang,FOOTER_CONSTANTS,$injectedData){$scope.state={modalStatus:{baseModalVisible:false,countryPickerVisible:true},countrySitesData:{countryCode:FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_STATES,defaultRegion:'',modalDisplayData:null,fullCountrySitesData:'',currentCountrySitesData:'',singleCountry:false,languageCode:siteLang,languageData:''},title:{languagePicker:{content:$filter('i18n')('COUNTRY_SITES_LANGUAGE_HEADER'),active:false},countryPicker:{content:$filter('i18n')('COUNTRY_SITES_COUNTRY_HEADER'),active:true}}};$scope.getFlagClass=function(){return('flag-icon '+angular.lowercase($scope.state.countrySitesData.countryCode));};$scope.activateModal=function(isLanguagePicker){var countryObj;$scope.state.modalStatus.baseModalVisible=true;$scope.state.modalStatus.countryPickerVisible=true;if(isLanguagePicker){$scope.state.modalStatus.countryPickerVisible=false;countryObj=angular.copy($scope.state.countrySitesData.currentCountrySitesData);countryObj.countryCode=$scope.state.countrySitesData.countryCode;$scope.state.currentCountry=angular.copy(countryObj);$scope.state.title.languagePicker.active=true;$scope.state.title.countryPicker.active=false;}};footerStateService.initState($scope.state.countrySitesData).then(function(){if(angular.isDefined($injectedData.modalStatus)&&!!$injectedData.modalStatus){$scope.activateModal(false);}});}]);}());(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('HeaderCtrl',['$scope','$injectedData',function($scope,$injectedData){$scope.init=function(){if(angular.isDefined($injectedData.isUserLoggedIn)){$scope.loggedIn=$injectedData.isUserLoggedIn;}else{$scope.loggedIn=false;}
if(angular.isDefined($injectedData.userName)){$scope.userName=$injectedData.userName;}else{$scope.userName='';}};$scope.$on('UPDATE_HEADER_NAME',function(response,data){$scope.userName=data.name;$scope.loggedIn=data.loggedIn;});$scope.init();}]);}());(function(){'use strict';var header=angular.module('globalHeader.controllers');header.controller('NotificationCtrl',['$scope','globalNotificationService',function($scope,globalNotificationService){globalNotificationService.init();$scope.globalNotificationsStateData=globalNotificationService.getNotifications();}]);}());(function(){'use strict';angular.module('footer.models').factory('countrySitesDisplayModelFactory',['FOOTER_CONSTANTS',function(FOOTER_CONSTANTS){var _createCountrySitesDisplayModel,_getCountrySitesDisplayModel,modalDisplayData=[{regionName:FOOTER_CONSTANTS.REGION_NAME_NA_SA,desktopOrder:1,tablerOrder:1,mobileOrder:1,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_BRAZIL,FOOTER_CONSTANTS.COUNTRY_CODE_CANADA,FOOTER_CONSTANTS.COUNTRY_CODE_MEXICO,FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_STATES]},{regionName:FOOTER_CONSTANTS.REGION_NAME_AFRICA_MIDDLE_EAST,desktopOrder:2,tablerOrder:2,mobileOrder:4,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_ISREAL,FOOTER_CONSTANTS.COUNTRY_CODE_SOUTH_AFRICA,FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_ARAB_EMIRATES]},{regionName:FOOTER_CONSTANTS.REGION_NAME_EUROPE,desktopOrder:3,tablerOrder:4,mobileOrder:2,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_AUSTRIA,FOOTER_CONSTANTS.COUNTRY_CODE_BELGIUM,FOOTER_CONSTANTS.COUNTRY_CODE_DENMARK,FOOTER_CONSTANTS.COUNTRY_CODE_FINLAND,FOOTER_CONSTANTS.COUNTRY_CODE_FRANCE,FOOTER_CONSTANTS.COUNTRY_CODE_GERMANY,FOOTER_CONSTANTS.COUNTRY_CODE_IRELAND,FOOTER_CONSTANTS.COUNTRY_CODE_ITALY,FOOTER_CONSTANTS.COUNTRY_CODE_NETHERLANDS,FOOTER_CONSTANTS.COUNTRY_CODE_NORWAY,FOOTER_CONSTANTS.COUNTRY_CODE_POLAND,FOOTER_CONSTANTS.COUNTRY_CODE_PORTUGAL,FOOTER_CONSTANTS.COUNTRY_CODE_RUSSIA,FOOTER_CONSTANTS.COUNTRY_CODE_SPAIN,FOOTER_CONSTANTS.COUNTRY_CODE_SWEDEN,FOOTER_CONSTANTS.COUNTRY_CODE_SWITZERLAND,FOOTER_CONSTANTS.COUNTRY_CODE_TURKEY,FOOTER_CONSTANTS.COUNTRY_CODE_UNITED_KINGDOM]},{regionName:FOOTER_CONSTANTS.REGION_NAME_ASIA_PACIFIC,desktopOrder:4,tablerOrder:3,mobileOrder:3,countryList:[FOOTER_CONSTANTS.COUNTRY_CODE_AUSTRALIA,FOOTER_CONSTANTS.COUNTRY_CODE_HONG_KONG,FOOTER_CONSTANTS.COUNTRY_CODE_INDIA,FOOTER_CONSTANTS.COUNTRY_CODE_JAPAN,FOOTER_CONSTANTS.COUNTRY_CODE_MALAYSIA,FOOTER_CONSTANTS.COUNTRY_CODE_NEW_ZEALAND,FOOTER_CONSTANTS.COUNTRY_CODE_SINGAPORE,FOOTER_CONSTANTS.COUNTRY_CODE_SOUTH_KOREA,FOOTER_CONSTANTS.COUNTRY_CODE_THAILAND]}];_createCountrySitesDisplayModel=function(fullCountrySitesData){var i,j,countryCodeString;for(i=0;i<modalDisplayData.length;i++){for(j=0;j<modalDisplayData[i].countryList.length;j++){countryCodeString=modalDisplayData[i].countryList[j];if(fullCountrySitesData&&fullCountrySitesData[countryCodeString]){modalDisplayData[i].countryList[j]=fullCountrySitesData[countryCodeString];}
modalDisplayData[i].countryList[j].countryCode=countryCodeString;}}
return modalDisplayData;};_getCountrySitesDisplayModel=function(fullCountrySitesData){return _createCountrySitesDisplayModel(fullCountrySitesData);};return{getCountrySitesDisplayModel:_getCountrySitesDisplayModel};}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('accountService',['Restangular',function(Restangular){var ACCOUNTS_ENDPOINT='accounts';return{getAccount:function(userId){return Restangular.one(ACCOUNTS_ENDPOINT,userId).get().then(function(account){return account;});}};}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('footerStateService',['$filter','countryService','countrySitesService','countrySitesDisplayModelFactory',function($filter,countryService,countrySitesService,countrySitesDisplayModelFactory){var _params,self={initState:function(controllerState){_params={state:controllerState};return self.getCountryCode().then(self.getCountrySitesData).then(self.setModalDisplayData).then(self.getLanguagesForCountry).then(self.addTranslations).then(self.setDefaultRegion);},getCountryCode:function(){var p=self.params();return countryService.getCurrentCountryCode().then(function(country){p.state.countryCode=country.countryCode;});},getCountrySitesData:function(){var p=self.params(),countryData;if(p&&p.state&&p.state.countryCode){return countrySitesService.getCountrySitesData().then(function(countrySitesData){if(angular.isDefined(countrySitesData)){p.state.fullCountrySitesData=countrySitesData;countryData=countrySitesData[p.state.countryCode];}
if(angular.isDefined(countryData)){p.state.currentCountrySitesData=countryData;}else{p.state.currentCountrySitesData=countrySitesData.US;}});}},getLanguagesForCountry:function(){var p=self.params(),countryData,languageCode;if(p&&p.state){countryData=p.state.currentCountrySitesData;languageCode=p.state.languageCode;if(p.state.languageCode.length>2){languageCode=p.state.languageCode.substring(0,2);}
if(countryData&&countryData.supportedLanguages&&countryData.supportedLanguages.length){p.state.languageData=window._.findWhere(countryData.supportedLanguages,{languageCode:languageCode});if(angular.equals(countryData.supportedLanguages.length,1)){p.state.singleCountry=true;}}}},setModalDisplayData:function(){var p=self.params(),data;if(p&&p.state&&p.state.fullCountrySitesData){data=countrySitesDisplayModelFactory.getCountrySitesDisplayModel(p.state.fullCountrySitesData);p.state.modalDisplayData=data;}},addTranslations:function(){var p=self.params();if(p&&p.state&&p.state.modalDisplayData){angular.forEach(p.state.modalDisplayData,function(data){if(data&&data.regionName){data.regionName=$filter('i18n')(data.regionName);}});}},setDefaultRegion:function(){var p=self.params();if(p&&p.state&&p.state.modalDisplayData){angular.forEach(p.state.modalDisplayData,function(data){var region;if(data&&data.regionName){region=data.regionName;}
if(data&&data.countryList&&angular.isArray(data.countryList)){angular.forEach(data.countryList,function(country){if(p.state.countryCode===country.countryCode){p.state.defaultRegion=region;}});}});}},params:function(){return _params;}};return self;}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('globalNotificationService',['ipCookie','$injectedData',function(ipCookie,$injectedData){var self={notifications:[],getNotifications:function(){return self.notifications;},createNotification:function(type,contentKey,closeCallback){self.notifications.push({type:type,content:contentKey,closeCallback:closeCallback});},getFunctionToSetCookieDismissal:function(cookieName,cookieValue,cookieExpiryDays){var closeFunction=null,expiryTimeMilliseconds,isValidArgs=(typeof cookieName==='string');isValidArgs=isValidArgs&&(cookieName.trim()!=='');if(isValidArgs){cookieName=cookieName.trim();switch(typeof cookieValue){case'string':cookieValue=cookieValue.trim();break;case'number':case'boolean':cookieValue=cookieValue.toString();break;default:cookieValue='Closed';break;}
if(jQuery.isNumeric(cookieExpiryDays)){cookieExpiryDays=parseFloat(cookieExpiryDays);expiryTimeMilliseconds=Math.round(cookieExpiryDays*24*60*60*1000);}else{expiryTimeMilliseconds=-1;}
closeFunction=function(){var myCookieName=cookieName,myCookieValue=cookieValue,myExpiryTimeMilliseconds=expiryTimeMilliseconds,today,expiryDateTime=0,options={path:'/'};if(myExpiryTimeMilliseconds>0){today=new Date();expiryDateTime=new Date();expiryDateTime.setTime(today.getTime()+myExpiryTimeMilliseconds);expiryDateTime=expiryDateTime.toGMTString();options.expires=expiryDateTime;}
ipCookie(myCookieName,myCookieValue,options);};}
return closeFunction;},setCookie:function(cookieName,cookieValue,expiryTime){var today,expires;cookieValue=cookieValue||'Closed';if(expiryTime){today=new Date();expires=new Date();expires.setTime(today.getTime()+expiryTime*60*1000);expires=expires.toGMTString();}else{expires=0;}
ipCookie(cookieName,cookieValue,{expires:expires,path:'/'});},init:function(){var globalNotificationsStateData=$injectedData.globalNotificationsStateData,getSanitizedCookieAttrs,isNotificationCookieDisabled,isDateInRange,isNotificationStateEnabled;getSanitizedCookieAttrs=function(notificationState){var cookieAttrs,isSanitizeable,sanitizedCookieAttrs=null;if(typeof notificationState==='object'){cookieAttrs=notificationState.cookieAttrs;}
isSanitizeable=(typeof cookieAttrs==='object');isSanitizeable=isSanitizeable&&(typeof cookieAttrs.cookieName==='string');isSanitizeable=isSanitizeable&&(cookieAttrs.cookieName.trim()!=='');if(isSanitizeable){sanitizedCookieAttrs={};sanitizedCookieAttrs.cookieName=cookieAttrs.cookieName.trim();sanitizedCookieAttrs.cookieValue=cookieAttrs.cookieValue||'Closed';if(jQuery.isNumeric(cookieAttrs.cookieExpiryDays)){sanitizedCookieAttrs.cookieExpiryDays=parseFloat(cookieAttrs.cookieExpiryDays);}else{sanitizedCookieAttrs.cookieExpiryDays=0;}}
return sanitizedCookieAttrs;};isNotificationCookieDisabled=function(notificationState){var cookieAttrs=notificationState.cookieAttrs,isCookieDisabled=false,cookieName,cookieValue;if(cookieAttrs!==null){cookieName=cookieAttrs.cookieName;cookieValue=ipCookie(cookieName);isCookieDisabled=(typeof cookieValue!=='undefined');isCookieDisabled=isCookieDisabled&&(cookieValue!=='enabled');}
return isCookieDisabled;};isDateInRange=function(notificationState){var timeZoneOffsetAsVal,startDateTimeAsUtcString,endDateTimeAsUtcString,startTimeAsVal,endTimeAsVal,nowTimeAsVal,isDateInRange=true;startDateTimeAsUtcString=notificationState.startTime;endDateTimeAsUtcString=notificationState.endTime;if(!!startDateTimeAsUtcString){try{startTimeAsVal=new Date(startDateTimeAsUtcString).valueOf();}catch(err){}}
if(!!endDateTimeAsUtcString){try{endTimeAsVal=new Date(endDateTimeAsUtcString).valueOf();}catch(err){}}
if(isFinite(startTimeAsVal)||isFinite(endTimeAsVal)){timeZoneOffsetAsVal=new Date().getTimezoneOffset()*60000;nowTimeAsVal=new Date().getTime().valueOf();if(isFinite(startTimeAsVal)){startTimeAsVal=startTimeAsVal-timeZoneOffsetAsVal;isDateInRange=(startTimeAsVal<=nowTimeAsVal);}
if(isDateInRange&&isFinite(endTimeAsVal)){endTimeAsVal=endTimeAsVal-timeZoneOffsetAsVal;isDateInRange=(endTimeAsVal>nowTimeAsVal);}
if(isDateInRange&&isFinite(startTimeAsVal)&&isFinite(endTimeAsVal)){isDateInRange=(startTimeAsVal<=endTimeAsVal);}}else{isDateInRange=true;}
return isDateInRange;};isNotificationStateEnabled=function(notificationState){var enablingCriteria=notificationState.isEnabled,isEnabledCriterion,isEnabled,isStateEnabled,enablers,i;enablers={isOutDatedBrowser:function(){var ie=(window.ActiveXObject&&(/msie\s(\d+)/i.exec(navigator.userAgent)[1]))||NaN;return(ie<=9);},isEuroLocale:function(){var isIstockObj,isEuroLocale=false,region,euroGeo=['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','HU','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE','UK'];isIstockObj=(typeof istock!=='undefined');isIstockObj=isIstockObj&&(istock!==null);isIstockObj=isIstockObj&&(typeof istock==='object');if(isIstockObj){if(typeof istock.georegional==='string'&&istock.georegional.trim()!==''){region=istock.georegional;}else if(typeof istock.siteRegion==='string'&&istock.siteRegion.trim()!==''){region=istock.siteRegion;}}
if(region){region=region.toUpperCase();isEuroLocale=euroGeo.indexOf(region)!==-1;}
return isEuroLocale;},isNotificationCookieEnabled:function(notificationState){var cookieAttrs=notificationState.cookieAttrs,isCookieEnabled=false,cookieName,cookieValue;if(cookieAttrs!==null){cookieName=cookieAttrs.cookieName;cookieValue=ipCookie(cookieName);isCookieEnabled=(typeof cookieValue!=='undefined');isCookieEnabled=isCookieEnabled&&(cookieValue==='enabled');}
return isCookieEnabled;}};if(typeof enablingCriteria==='undefined'||enablingCriteria===null){isStateEnabled=true;}else if(typeof enablingCriteria==='boolean'){isStateEnabled=enablingCriteria;}else if(angular.isArray(enablingCriteria)){isStateEnabled=true;for(i=0;i<enablingCriteria.length;i++){isEnabledCriterion=enablingCriteria[i];switch(typeof isEnabledCriterion){case'string':isEnabled=enablers[isEnabledCriterion];if(typeof isEnabled==='function'){isStateEnabled=isEnabled(notificationState);}
break;case'boolean':isStateEnabled=isEnabledCriterion;break;default:isStateEnabled=true;break;}
if(!isStateEnabled){break;}}}
return isStateEnabled;};angular.forEach(globalNotificationsStateData,function(notificationState,key){var isEnabled,closeFunction;isEnabled=(typeof notificationState==='object'&&typeof key==='string');if(isEnabled){notificationState.cookieAttrs=getSanitizedCookieAttrs(notificationState);}
isEnabled=isEnabled&&!isNotificationCookieDisabled(notificationState);isEnabled=isEnabled&&isNotificationStateEnabled(notificationState);isEnabled=isEnabled&&isDateInRange(notificationState);if(isEnabled){if(notificationState.cookieAttrs!==null){closeFunction=self.getFunctionToSetCookieDismissal(notificationState.cookieAttrs.cookieName,notificationState.cookieAttrs.cookieValue,notificationState.cookieAttrs.cookieExpiryDays);}else{closeFunction=null;}
self.createNotification(notificationState.cssClass,key,closeFunction);}},this);}};return self;}]);}());(function(){'use strict';angular.module('globalHeader.services').factory('localePickerService',['$window',function($window){var _country=null,_language=null,_languageList=[],_setCountry,_getCountry,_getLanguage,_setLanguage,_setLanguageList,_getLanguageList,_loadLanguage;_setCountry=function(country){if(country){_country=angular.copy(country);_setLanguageList(_country.supportedLanguages);}};_setLanguage=function(language){if(language){_language=angular.copy(language);}};_getLanguage=function(){return _language;};_setLanguageList=function(languageList){if(languageList&&angular.isArray(languageList)){_languageList=angular.copy(languageList);if(_languageList.length===1){_setLanguage(_languageList[0]);}}};_getLanguageList=function(){return _languageList;};_getCountry=function(){return _country;};_loadLanguage=function(languageUrl){if(languageUrl&&angular.isString(languageUrl)){$window.location.href=languageUrl;}};return{setCountry:_setCountry,getCountry:_getCountry,setLanguage:_setLanguage,getLanguage:_getLanguage,getLanguageList:_getLanguageList,loadLanguage:_loadLanguage};}]);}());(function($){$(document).ready(function(){if($('#content #plans-pricing').length){$('.plans-pricing-link').addClass('header-link-active');}});})(jQuery.noConflict());(function(window,document){'use strict';var features={bind:!!(function(){}.bind),classList:'classList'in document.documentElement,rAF:!!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;function Debouncer(callback){this.callback=callback;this.ticking=false;}
Debouncer.prototype={constructor:Debouncer,update:function(){this.callback&&this.callback();this.ticking=false;},requestTick:function(){if(!this.ticking){requestAnimationFrame(this.rafCallback||(this.rafCallback=this.update.bind(this)));this.ticking=true;}},handleEvent:function(){this.requestTick();}};function extend(object){if(arguments.length<=0){throw new Error('Missing arguments in extend function');}
var result=object||{},key,i;for(i=1;i<arguments.length;i++){var replacement=arguments[i]||{};for(key in replacement){if(typeof result[key]==='object'){result[key]=extend(result[key],replacement[key]);}
else{result[key]=result[key]||replacement[key];}}}
return result;}
function Headroom(elem,options){options=extend(options,Headroom.options);this.lastKnownScrollY=0;this.elem=elem;this.debouncer=new Debouncer(this.update.bind(this));this.tolerance=options.tolerance;this.classes=options.classes;this.offset=options.offset;this.initialised=false;this.onPin=options.onPin;this.onUnpin=options.onUnpin;this.onTop=options.onTop;this.onNotTop=options.onNotTop;}
Headroom.prototype={constructor:Headroom,init:function(){if(!Headroom.cutsTheMustard){return;}
this.elem.classList.add(this.classes.initial);setTimeout(this.attachEvent.bind(this),100);return this;},destroy:function(){var classes=this.classes;this.initialised=false;window.removeEventListener('scroll',this.debouncer,false);this.elem.classList.remove(classes.unpinned,classes.pinned,classes.top,classes.initial);},attachEvent:function(){if(!this.initialised){this.lastKnownScrollY=this.getScrollY();this.initialised=true;window.addEventListener('scroll',this.debouncer,false);this.debouncer.handleEvent();}},unpin:function(){var classList=this.elem.classList,classes=this.classes;if(classList.contains(classes.pinned)||!classList.contains(classes.unpinned)){classList.add(classes.unpinned);classList.remove(classes.pinned);this.onUnpin&&this.onUnpin.call(this);}},pin:function(){var classList=this.elem.classList,classes=this.classes;if(classList.contains(classes.unpinned)){classList.remove(classes.unpinned);classList.add(classes.pinned);this.onPin&&this.onPin.call(this);}},top:function(){var classList=this.elem.classList,classes=this.classes;if(!classList.contains(classes.top)){classList.add(classes.top);classList.remove(classes.notTop);this.onTop&&this.onTop.call(this);}},notTop:function(){var classList=this.elem.classList,classes=this.classes;if(!classList.contains(classes.notTop)){classList.add(classes.notTop);classList.remove(classes.top);this.onNotTop&&this.onNotTop.call(this);}},getScrollY:function(){return(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;},getViewportHeight:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;},getDocumentHeight:function(){var body=document.body,documentElement=document.documentElement;return Math.max(body.scrollHeight,documentElement.scrollHeight,body.offsetHeight,documentElement.offsetHeight,body.clientHeight,documentElement.clientHeight);},isOutOfBounds:function(currentScrollY){var pastTop=currentScrollY<0,pastBottom=currentScrollY+this.getViewportHeight()>this.getDocumentHeight();return pastTop||pastBottom;},toleranceExceeded:function(currentScrollY){return Math.abs(currentScrollY-this.lastKnownScrollY)>=this.tolerance;},shouldUnpin:function(currentScrollY,toleranceExceeded){var scrollingDown=currentScrollY>this.lastKnownScrollY,pastOffset=currentScrollY>=this.offset;return scrollingDown&&pastOffset&&toleranceExceeded;},shouldPin:function(currentScrollY,toleranceExceeded){var scrollingUp=currentScrollY<this.lastKnownScrollY,pastOffset=currentScrollY<=this.offset;return(scrollingUp&&toleranceExceeded)||pastOffset;},update:function(){var currentScrollY=this.getScrollY(),toleranceExceeded=this.toleranceExceeded(currentScrollY);if(this.isOutOfBounds(currentScrollY)){return;}
if(currentScrollY<=this.offset){this.top();}else{this.notTop();}
if(this.shouldUnpin(currentScrollY,toleranceExceeded)){this.unpin();}
else if(this.shouldPin(currentScrollY,toleranceExceeded)){this.pin();}
this.lastKnownScrollY=currentScrollY;}};Headroom.options={tolerance:0,offset:0,classes:{pinned:'searchbar-pinned',unpinned:'searchbar-unpinned',top:'searchbar-top',notTop:'searchbar-not-top',initial:'searchbar'}};Headroom.cutsTheMustard=typeof features!=='undefined'&&features.rAF&&features.bind&&features.classList;window.Headroom=Headroom;}(window,document));(function(module){if(typeof define==='function'&&define.amd){define(['jquery'],module);}else{module(jQuery);}})(function(jQuery,undefined){var
threshold=6,add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node);},requestFrame=(function(){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn();},25);});})(),ignoreTags={textarea:true,input:true,select:true,button:true},mouseevents={move:'mousemove',cancel:'mouseup dragstart',end:'mouseup'},touchevents={move:'touchmove',cancel:'touchend',end:'touchend'};function Timer(fn){var callback=fn,active=false,running=false;function trigger(time){if(active){callback();requestFrame(trigger);running=true;active=false;}
else{running=false;}}
this.kick=function(fn){active=true;if(!running){trigger();}};this.end=function(fn){var cb=callback;if(!fn){return;}
if(!running){fn();}
else{callback=active?function(){cb();fn();}:fn;active=true;}};}
function returnTrue(){return true;}
function returnFalse(){return false;}
function preventDefault(e){e.preventDefault();}
function preventIgnoreTags(e){if(ignoreTags[e.target.tagName.toLowerCase()]){return;}
e.preventDefault();}
function isLeftButton(e){return(e.which===1&&!e.ctrlKey&&!e.altKey);}
function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch){return touchList.identifiedTouch(id);}
i=-1;l=touchList.length;while(++i<l){if(touchList[i].identifier===id){return touchList[i];}}}
function changedTouch(e,event){var touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return;}
if(touch.pageX===event.pageX&&touch.pageY===event.pageY){return;}
return touch;}
function mousedown(e){var data;if(!isLeftButton(e)){return;}
data={target:e.target,startX:e.pageX,startY:e.pageY,timeStamp:e.timeStamp};add(document,mouseevents.move,mousemove,data);add(document,mouseevents.cancel,mouseend,data);}
function mousemove(e){var data=e.data;checkThreshold(e,data,e,removeMouse);}
function mouseend(e){removeMouse();}
function removeMouse(){remove(document,mouseevents.move,mousemove);remove(document,mouseevents.cancel,mouseend);}
function touchstart(e){var touch,template;if(ignoreTags[e.target.tagName.toLowerCase()]){return;}
touch=e.changedTouches[0];template={target:touch.target,startX:touch.pageX,startY:touch.pageY,timeStamp:e.timeStamp,identifier:touch.identifier};add(document,touchevents.move+'.'+touch.identifier,touchmove,template);add(document,touchevents.cancel+'.'+touch.identifier,touchend,template);}
function touchmove(e){var data=e.data,touch=changedTouch(e,data);if(!touch){return;}
checkThreshold(e,data,touch,removeTouch);}
function touchend(e){var template=e.data,touch=identifiedTouch(e.changedTouches,template.identifier);if(!touch){return;}
removeTouch(template.identifier);}
function removeTouch(identifier){remove(document,'.'+identifier,touchmove);remove(document,'.'+identifier,touchend);}
function checkThreshold(e,template,touch,fn){var distX=touch.pageX-template.startX,distY=touch.pageY-template.startY;if((distX*distX)+(distY*distY)<(threshold*threshold)){return;}
triggerStart(e,template,touch,distX,distY,fn);}
function handled(){this._handled=returnTrue;return false;}
function flagAsHandled(e){e._handled();}
function triggerStart(e,template,touch,distX,distY,fn){var node=template.target,touches,time;touches=e.targetTouches;time=e.timeStamp-template.timeStamp;template.type='movestart';template.distX=distX;template.distY=distY;template.deltaX=distX;template.deltaY=distY;template.pageX=touch.pageX;template.pageY=touch.pageY;template.velocityX=distX/time;template.velocityY=distY/time;template.targetTouches=touches;template.finger=touches?touches.length:1;template._handled=handled;template._preventTouchmoveDefault=function(){e.preventDefault();};trigger(template.target,template);fn(template.identifier);}
function activeMousemove(e){var timer=e.data.timer;e.data.touch=e;e.data.timeStamp=e.timeStamp;timer.kick();}
function activeMouseend(e){var event=e.data.event,timer=e.data.timer;removeActiveMouse();endEvent(event,timer,function(){setTimeout(function(){remove(event.target,'click',returnFalse);},0);});}
function removeActiveMouse(event){remove(document,mouseevents.move,activeMousemove);remove(document,mouseevents.end,activeMouseend);}
function activeTouchmove(e){var event=e.data.event,timer=e.data.timer,touch=changedTouch(e,event);if(!touch){return;}
e.preventDefault();event.targetTouches=e.targetTouches;e.data.touch=touch;e.data.timeStamp=e.timeStamp;timer.kick();}
function activeTouchend(e){var event=e.data.event,timer=e.data.timer,touch=identifiedTouch(e.changedTouches,event.identifier);if(!touch){return;}
removeActiveTouch(event);endEvent(event,timer);}
function removeActiveTouch(event){remove(document,'.'+event.identifier,activeTouchmove);remove(document,'.'+event.identifier,activeTouchend);}
function updateEvent(event,touch,timeStamp,timer){var time=timeStamp-event.timeStamp;event.type='move';event.distX=touch.pageX-event.startX;event.distY=touch.pageY-event.startY;event.deltaX=touch.pageX-event.pageX;event.deltaY=touch.pageY-event.pageY;event.velocityX=0.3*event.velocityX+0.7*event.deltaX/time;event.velocityY=0.3*event.velocityY+0.7*event.deltaY/time;event.pageX=touch.pageX;event.pageY=touch.pageY;}
function endEvent(event,timer,fn){timer.end(function(){event.type='moveend';trigger(event.target,event);return fn&&fn();});}
function setup(data,namespaces,eventHandle){add(this,'movestart.move',flagAsHandled);return true;}
function teardown(namespaces){remove(this,'dragstart drag',preventDefault);remove(this,'mousedown touchstart',preventIgnoreTags);remove(this,'movestart',flagAsHandled);return true;}
function addMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return;}
add(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid,preventDefault,undefined,handleObj.selector);add(this,'mousedown.'+handleObj.guid,preventIgnoreTags,undefined,handleObj.selector);}
function removeMethod(handleObj){if(handleObj.namespace==="move"||handleObj.namespace==="moveend"){return;}
remove(this,'dragstart.'+handleObj.guid+' drag.'+handleObj.guid);remove(this,'mousedown.'+handleObj.guid);}
jQuery.event.special.movestart={setup:setup,teardown:teardown,add:addMethod,remove:removeMethod,_default:function(e){var event,data;if(!e._handled()){return;}
function update(time){updateEvent(event,data.touch,data.timeStamp);trigger(e.target,event);}
event={target:e.target,startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,timeStamp:e.timeStamp,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger};data={event:event,timer:new Timer(update),touch:undefined,timeStamp:undefined};if(e.identifier===undefined){add(e.target,'click',returnFalse);add(document,mouseevents.move,activeMousemove,data);add(document,mouseevents.end,activeMouseend,data);}
else{e._preventTouchmoveDefault();add(document,touchevents.move+'.'+e.identifier,activeTouchmove,data);add(document,touchevents.end+'.'+e.identifier,activeTouchend,data);}}};jQuery.event.special.move={setup:function(){add(this,'movestart.move',jQuery.noop);},teardown:function(){remove(this,'movestart.move',jQuery.noop);}};jQuery.event.special.moveend={setup:function(){add(this,'movestart.moveend',jQuery.noop);},teardown:function(){remove(this,'movestart.moveend',jQuery.noop);}};add(document,'mousedown.move',mousedown);add(document,'touchstart.move',touchstart);if(typeof Array.prototype.indexOf==='function'){(function(jQuery,undefined){var props=["changedTouches","targetTouches"],l=props.length;while(l--){if(jQuery.event.props.indexOf(props[l])===-1){jQuery.event.props.push(props[l]);}}})(jQuery);};});(function(module){if(typeof define==='function'&&define.amd){define(['jquery'],module);}else{module(jQuery);}})(function(jQuery,undefined){var add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node);},settings={threshold:0.4,sensitivity:6};function moveend(e){var w,h,event;w=e.currentTarget.offsetWidth;h=e.currentTarget.offsetHeight;event={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger};if(e.distX>e.distY){if(e.distX>-e.distY){if(e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swiperight';trigger(e.currentTarget,event);}}
else{if(-e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipeup';trigger(e.currentTarget,event);}}}
else{if(e.distX>-e.distY){if(e.distY/h>settings.threshold||e.velocityY*e.distY/w*settings.sensitivity>1){event.type='swipedown';trigger(e.currentTarget,event);}}
else{if(-e.distX/w>settings.threshold||e.velocityX*e.distX/w*settings.sensitivity>1){event.type='swipeleft';trigger(e.currentTarget,event);}}}}
function getData(node){var data=jQuery.data(node,'event_swipe');if(!data){data={count:0};jQuery.data(node,'event_swipe',data);}
return data;}
jQuery.event.special.swipe=jQuery.event.special.swipeleft=jQuery.event.special.swiperight=jQuery.event.special.swipeup=jQuery.event.special.swipedown={setup:function(data,namespaces,eventHandle){var data=getData(this);if(data.count++>0){return;}
add(this,'moveend',moveend);return true;},teardown:function(){var data=getData(this);if(--data.count>0){return;}
remove(this,'moveend',moveend);return true;},settings:settings};});(function($){var ocSwipe=function(){var _ocWrap=$('body .off-canvas-wrap');var _directionsAry=['left','right'];var _curDirection;$.each(_directionsAry,function(i,v){_ocWrap.on('swipe'+v,function(){_curDirection=v;onSwipe();}).on('movestart',function(e){if((e.distX>e.distY&&e.distX<-e.distY)||(e.distX<e.distY&&e.distX>-e.distY)){e.preventDefault();}});})
function getReverseDirection(){if(_directionsAry[0]===_curDirection){_directionsAry.reverse();}
return _directionsAry[0];};function onSwipe(){if(isOpen()){doSwipeClose();}else{doSwipeOpen();}};function doSwipeOpen(){var reverse=getReverseDirection();var openAnchor=_ocWrap.find('a.'+reverse+'-off-canvas-toggle');openAnchor.trigger('click');};function doSwipeClose(){var closeAnchor=$('.'+_curDirection+'-off-canvas-menu').find('a.exit-off-canvas');closeAnchor.trigger('click');};function isOpen(){if(_ocWrap.hasClass('move-left')||_ocWrap.hasClass('move-right')){return true;}
return false;};};if(Modernizr.touch){ocSwipe();}})(jQuery.noConflict());